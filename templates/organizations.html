{% load static %}
<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>{% block title %}Galeri - Lavinya{% endblock %}</title>
  <!-- Font Awesome CDN -->
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css" integrity="sha512-..." crossorigin="anonymous" referrerpolicy="no-referrer" />
  <link rel="stylesheet" href="{% static 'css/style.css' %}" />
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600&display=swap" rel="stylesheet">

  
</head>
<body>

  <div class="top-bar">
    <div class="top-bar-left">
      <span><i class="fas fa-envelope"></i> lavinyarezervasyon@gmail.com</span>
      <span><i class="fas fa-phone-alt"></i> +90 555 043 82 43</span>
      <span><i class="fas fa-map-marker-alt"></i> Yeşilköy, Simav/Kütahya</span>
    </div>
    <div class="top-bar-right">
      <a href="#"><i class="fab fa-facebook-f"></i></a>
      <a href="#"><i class="fab fa-twitter"></i></a>
      <a href="https://www.instagram.com/lavinyagardenrestaurant?igsh=MXhuZGpobzVlN2t6Nw==" target="_blank" rel="noopener noreferrer">
  <i class="fab fa-instagram"></i>
</a>
      <a href="#"><i class="fab fa-youtube"></i></a>
    </div>
  </div>

<header>
  <div class="logo">
    <a href="{% url 'index' %}" class="logo-link">
      <img src="{% static 'images/logo.png' %}" alt="Logo" class="logo-img" />
    </a>

    <div class="mobile-title">
        <span class="line1">Lavinya Garden Restaurant</span>
        <span class="line2">& Wedding Area</span>
      </div>
</div>
  <nav id="nav-menu">
    <a href="{% url 'index' %}">Anasayfa</a>
    <a href="{% url 'index' %}#hakkimizda" class="nav-about">Hakkımızda</a>
    <a href="{% url 'menu' %}">Restaurant</a>
    <a href="{% url 'cafe' %}">Cafe</a>
      <div class="nav-item organizations-dropdown">
    <a href="{% url 'organizations' %}" class="organizations-dropdown-toggle">
      Organizasyonlar <i class="fas fa-chevron-down"></i>
    </a>
    <div class="organizations-dropdown-menu">
      <a href="#">Düğün & Nişan</a>
      <a href="#">Kurumsal Etkinlikler</a>
      <a href="#">Özel Yemek Davetleri</a>
    </div>
  </div>
    <a href="{% url 'gallery' %}">Galeri</a>
    <a href="{% url 'reservation' %}">Rezervasyon</a>
    <a href="{% url 'contact' %}">Iletisim</a>
  </nav>

  <div class="hamburger" id="hamburger-btn" aria-label="Menüyü aç/kapat" aria-expanded="false" role="button" tabindex="0">
    <div></div>
    <div></div>
    <div></div>
  </div>
</header>

<div id="loading-spinner">
  <div class="spinner"></div>
</div>

<script>
  window.addEventListener('load', function() {
    const spinner = document.getElementById('loading-spinner');
    if (spinner) {
      spinner.style.display = 'none';
    }
  });
</script>


<!-- ORGANİZASYON KARTLARI -->
<section class="organizations-section" id="organizasyonlar">
  <h2 class="org-heading">Seçiminizi yapın </h2>
  <div class="org-cards">
    <article id="dugun-card" class="org-card" data-type="dugun">
      <div class="org-icon"></div>
      <h3>Düğün</h3>
      <p>Doğayla iç içe masalsı bir atmosferde, size özel tasarlanmış unutulmaz bir düğün</p>
    </article>
    <article id="nisan-card" class="org-card" data-type="nisan">
      <div class="org-icon"></div>
      <h3>Nişan</h3>
      <p>Samimi dekorasyon ve özenli servisle nişan gününüzü kusursuz hale getiriyoruz.</p>
    </article>
  </div>
</section>

{% for org_type, org_label in org_choices %}
<div style="display: flex; flex: 1 1 100%; max-width: 1200px; gap: 2rem;">
  <div id="{{ org_type }}-form" class="orderform"
       style="flex: 2; background: #fff; padding: 1.5rem; border-radius: 1rem; box-shadow: 0 0 10px rgba(0,0,0,0.1); display:none;">
    <h2>{{ org_label }} Organizasyon Formu</h2>
    <form id="{{ org_type }}-order-form">

      {% if org_type == "dugun" %}
      <label>
        Tarih Seçiniz:
        <input type="date" name="date" required />
        <small>(Dolu tarihler kırmızı gözükecektir)</small>
      </label>
      {% endif %}

      {% with person_group_started=False %}
      {% for option in service_options %}
        {% if option.organization_type == org_type %}
          
          {% if option.per_person and not person_group_started %}
            {% ifchanged %}
            <fieldset>
              <legend>Kişi Başına Seçenekler</legend>
              {% with person_group_started=True %}
              {% endwith %}
            {% endifchanged %}
          {% elif not option.per_person and person_group_started %}
            </fieldset>
            {% with person_group_started=False %}
            {% endwith %}
          {% endif %}

          <label>
            <input type="checkbox"
                   name="{{ option.slug }}"
                   data-price="{{ option.price }}"
                   data-person="{{ option.per_person|yesno:'1,0' }}" />
            {{ option.name }} (₺{{ option.price|floatformat:"0" }}){% if option.per_person %} / kişi{% endif %}
          </label>
        {% endif %}
      {% endfor %}

      {% if person_group_started %}
        </fieldset>
      {% endif %}
      {% endwith %}

      <label>
        Kişi Sayısı:
        <input type="number" id="{{ org_type }}-guest-count" name="guest_count" value="100" min="1" />
        <small>(kişi başı hizmetlerde bu sayı kullanılır)</small>
      </label>
    </form>
  </div>

  <div id="{{ org_type }}-summary" class="order-summary"
       style="display: none; flex: 1; background: #f8f8f8; padding: 1.5rem; border-radius: 1rem; height: fit-content; box-shadow: 0 0 10px rgba(0,0,0,0.05);">
    <h4>Toplam Fiyat Özeti</h4>
    <ul id="{{ org_type }}-summary-list"></ul>
    <strong>Toplam: ₺<span id="{{ org_type }}-total-price">0</span></strong>
  </div>
</div>
{% endfor %}



<footer class="modern-footer">
  <div class="footer-wrapper">
    
    <!-- İLETİŞİM -->
<div class="footer-col">
  <h4>İletişim</h4>
  <p><i class="fas fa-map-marker-alt"></i> Yeşilköy, Simav / Kütahya</p>
  <p>
    <i class="fas fa-envelope"></i>
    <a href="mailto:lavinyarezervasyon@gmail.com">lavinyarezervasyon@gmail.com</a>
  </p>
  <p>
    <i class="fas fa-phone-alt"></i>
    <a href="tel:+905550438243">+90 555 043 82 43</a>
  </p>
</div>

    <!-- MENÜ -->
    <div class="footer-col">
      <h4>Hızlı Erişim</h4>
      <ul>
        <li><a href="{% url 'index' %}">Anasayfa</a></li>
        <li><a href="{% url 'index' %}#hakkimizda" class="nav-about">Hakkımızda</a></li>
        <li><a href="{% url 'menu' %}">Menü</a></li>
        <li><a href="{% url 'cafe' %}">Cafe</a></li>
        <li><a href="{% url 'organizations' %}">Organizasyonlar</a></li>
        <li><a href="{% url 'gallery' %}">Galeri</a></li>
        <li><a href="{% url 'reservation' %}">Rezervasyon</a></li>
        <li><a href="{% url 'contact' %}">Iletisim</a></li>
      </ul>
    </div>

    <!-- SOSYAL MEDYA -->
    <div class="footer-col">
      <h4>Sosyal Medya</h4>
      <div class="footer-social">
        <a href="#"><i class="fab fa-facebook-f"></i></a>
        <a href="https://www.instagram.com/lavinyagardenrestaurant/" target="_blank"><i class="fab fa-instagram"></i></a>
        <a href="#"><i class="fab fa-twitter"></i></a>
        <a href="#"><i class="fab fa-youtube"></i></a>
      </div>
    </div>

    <!-- HARİTA -->
    <div class="footer-col">
      <h4>Konum</h4>
      <div class="map-frame">
        <iframe 
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3021.208382197883!2d28.997406!3d39.0686333!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x14c83fdc68bb30ab%3A0x9c4cab9dd2764e45!2sYe%C5%9Filk%C3%B6y%2FSimav%2FK%C3%BCtahya!5e0!3m2!1str!2str!4v1710000000000" 
          width="100%" height="160" style="border:0; border-radius: 8px;" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </div>

  </div>
<div class="footer-bottom">
  <span>© 2025 Lavinya Garden Restaurant | Tüm Hakları Saklıdır.</span>
  <span class="designer-credit">Designed by Bahadır Yasin Çetinsoy</span>
</div>
</footer>




<a 
  href="https://web.whatsapp.com/send?phone=8503070043&text=Merhaba%20Lavinya%20Restaurant%21%0ARezervasyon%20yapmak%20istiyorum."
  target="_blank" 
  id="whatsapp-float" 
  rel="noopener noreferrer"
  aria-label="WhatsApp ile iletişime geç"
>
  <img src="https://upload.wikimedia.org/wikipedia/commons/6/6b/WhatsApp.svg" alt="WhatsApp" />
</a>

<style>
  #whatsapp-float {
    position: fixed;
    width: 60px;
    height: 60px;
    bottom: 20px;
    right: 20px;
    background-color: #25D366;
    border-radius: 50%;
    box-shadow: 2px 2px 5px rgba(0,0,0,0.3);
    display: flex;
    justify-content: center;
    align-items: center;
    z-index: 1000;
    cursor: pointer;
    transition: background-color 0.3s ease;
  }

  #whatsapp-float img {
    width: 35px;
    height: 35px;
  }

  #whatsapp-float:hover {
    background-color: #1ebe57;
  }
</style>



<script>
document.addEventListener('DOMContentLoaded', () => {
  const orgCards = document.querySelectorAll('.org-card');

  const observer = new IntersectionObserver(entries => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        entry.target.classList.add('visible');
      }
    });
  }, { threshold: 0.3 });

  orgCards.forEach(card => observer.observe(card));
});
</script>


<script>
  const hamburger = document.getElementById('hamburger-btn');
  const navMenu = document.getElementById('nav-menu');

  hamburger.addEventListener('click', () => {
    hamburger.classList.toggle('active');
    navMenu.classList.toggle('open');
    const expanded = hamburger.getAttribute('aria-expanded') === 'true';
    hamburger.setAttribute('aria-expanded', !expanded);
  });

  hamburger.addEventListener('keydown', (e) => {
    if (e.key === 'Enter' || e.key === ' ') {
      e.preventDefault();
      hamburger.click();
    }
  });
</script>

<script>
  const header = document.querySelector('header');

  window.addEventListener('scroll', () => {
    if (window.scrollY > 50) {
      header.classList.add('shrink');
    } else {
      header.classList.remove('shrink');
    }
  });
</script>


<script>
  window.addEventListener('DOMContentLoaded', () => {
    // Sayfa yüklendiğinde tüm form ve özetleri gizle
    document.querySelectorAll('.orderform').forEach(f => f.style.display = 'none');
    document.querySelectorAll('.order-summary').forEach(s => s.style.display = 'none');

    // Kartlar tıklandığında
    document.querySelectorAll('.org-card').forEach(card => {
      card.addEventListener('click', () => {
        const type = card.getAttribute('data-type');

        // Önce tüm form ve özetleri gizle
        document.querySelectorAll('.orderform').forEach(f => f.style.display = 'none');
        document.querySelectorAll('.order-summary').forEach(s => s.style.display = 'none');

        // İlgili formu göster
        const activeForm = document.getElementById(type + '-form');
        if (activeForm) {
          activeForm.style.display = 'block';
          activeForm.scrollIntoView({ behavior: 'smooth' });

          // Formdaki inputlara event bağla (birden fazla bağlanmasın diye kontrol var)
          if (!activeForm.dataset.eventsAttached) {
            attachOrderFormEvents(activeForm);
            activeForm.dataset.eventsAttached = 'true';
          }
        }

        // İlgili summary'yi göster
        const activeSummary = document.getElementById(type + '-summary');
        if (activeSummary) {
          activeSummary.style.display = 'block';
        }
      });
    });
  });

  function attachOrderFormEvents(form) {
    if (!form) return;

    const formElement = form.querySelector('form');
    const guestInput = form.querySelector('input[type="number"]');
    if (!formElement || !guestInput) return;

    const type = form.id.split('-')[0];
    const summaryList = document.querySelector(`#${type}-summary-list`);
    const totalPriceElem = document.querySelector(`#${type}-total-price`);

    function updateSummary() {
      let total = 0;
      let summary = [];

      formElement.querySelectorAll('input[type="checkbox"]').forEach(cb => {
        if (cb.checked) {
          const unitPrice = parseInt(cb.getAttribute('data-price')) || 0;
          const isPerPerson = cb.getAttribute('data-person') === '1';
          const guestCount = parseInt(guestInput.value) || 1;
          const price = isPerPerson ? unitPrice * guestCount : unitPrice;

          total += price;
          summary.push(`<li>${cb.parentNode.textContent.trim()} +₺${price.toLocaleString('tr-TR')}</li>`);
        }
      });

      summaryList.innerHTML = summary.join('');
      totalPriceElem.textContent = total.toLocaleString('tr-TR');
    }

    // Formda input değişikliklerinde güncelle
    formElement.addEventListener('input', updateSummary);
    guestInput.addEventListener('input', updateSummary);

    updateSummary();
  }
</script>




</body>
</html>
